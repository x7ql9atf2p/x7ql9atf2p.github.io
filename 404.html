<html>
<head>
    <link rel="stylesheet" href="/drive/main.css">
    <script src="/drive/main.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            const match = window.location.pathname.match(/^\/view\/(.+)/);
            if (match) {                
                const fileUrl = `https://${window.location.host}/drive/${match[1]}`;
                try {
                    const response = await fetch(fileUrl, { method: "HEAD" });
                    if (response.ok) {
                        const a = document.createElement("a");
                        a.href = fileUrl;
                        a.download = match[1];
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                    } else {
                        console.log("cant find file")
                    }
                } catch (error) {
                    window.location.href = "index.html"
                }
            }
        });
    </script>
</head>
<body></body>
</html>
